<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vue-Fabric</title>
  <link rel="icon" href="./static/favicon.ico">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }

    h1 {
      margin-bottom: 20px;
      color: #333;
    }

    #canvas-container {
      position: relative;
      border: 1px solid #ccc;
      overflow: hidden;
      height: 600px;
      background: url(../demo/static/draw-bg.png) left top no-repeat;
      background-size: 100% 100%;
    }

    .toolbar-top {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .toolbar-top button {
      padding: 8px 16px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: #fff;
      cursor: pointer;
      transition: all 0.2s;
    }

    .toolbar-top button:hover {
      background: #02a7f0;
      color: #fff;
      border-color: #02a7f0;
    }

    .toolbar-top input {
      padding: 6px 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      width: 150px;
    }

    .toolbar-row {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
      align-items: center;
      flex-wrap: wrap;
    }

    .toolbar-row label {
      font-size: 14px;
      color: #666;
    }

    .info {
      margin-top: 15px;
      padding: 10px;
      background: #fff;
      border-radius: 4px;
      font-size: 14px;
      color: #666;
    }

    .mouse-position {
      position: fixed;
      top: 20px;
      right: 20px;
      color: #333;
      font-size: 14px;
      z-index: 100;
    }
  </style>
</head>

<body>
  <div class="toolbar-top">
    <div class="toolbar-row">
      <button onclick="board.setTool('select')">选择</button>
      <!-- <button onclick="batchDelete()">批量删除</button> -->
      <button onclick="addCustomText()">新增文字</button>
      <!-- <button onclick="addCustomImage()">新增图片</button> -->
      <!-- <button onclick="batchAddTexts()">批量新增文字</button> -->
      <!-- <button onclick="batchAddImages()">批量新增图片</button> -->
      <!-- <button onclick="batchUpdateTexts()">批量修改文字</button> -->
      <!-- <button onclick="batchUpdateImages()">批量修改图片</button> -->
      <!-- <button onclick="board.setTool('curve')">画曲线</button> -->
      <!-- <button onclick="board.undo()">撤销</button> -->
      <!-- <button onclick="board.redo()">还原</button> -->
      <button onclick="board.zoomIn()">放大</button>
      <button onclick="board.zoomOut()">缩小</button>
      <!-- <button onclick="board.resetZoom()">还原视图</button> -->
      <!-- <button onclick="board.toggleAreaHelpers()">显示/隐藏距离</button> -->
      <!-- <button onclick="toolbar.show()">显示工具栏</button> -->
      <!-- <button onclick="toolbar.hide()">隐藏工具栏</button> -->
      <button onclick="listCustomObjects()">列出对象</button>
    </div>
    <div class="toolbar-row">
      <button onclick="board.originClear()">清空画布</button>
      <button onclick="exportCanvas()">导出JSON</button>
      <button onclick="document.getElementById('jsonFileInput').click()">导入JSON</button>
      <input type="file" id="jsonFileInput" accept=".json" onchange="handleJsonFileImport(event)" style="display:none">
      <!-- <button onclick="board.exportToImage()">下载图片</button> -->
    </div>
    <!-- <div class="toolbar-row">
      <label>修改文字:</label>
      <input type="text" id="textIdInput" placeholder="输入文字ID">
      <button onclick="updateTextByInput()">修改文字</button>
    </div> -->
    <!-- <div class="toolbar-row">
      <label>操作图片:</label>
      <input type="text" id="imageIdInput" placeholder="输入图片ID">
      <button onclick="rotateImageByInput()">旋转图片</button>
    </div> -->
    <!-- <div class="toolbar-row">
      <label>删除对象:</label>
      <input type="text" id="deleteIdInput" placeholder="输入要删除的ID">
      <button onclick="deleteByInput()">删除</button>
    </div> -->
    <!-- <div class="toolbar-row">
      <label>人员追踪:</label>
      <button onclick="loadRealPersonData()">加载真实数据</button>
      <button onclick="startSimulateWebSocket()">模拟WebSocket更新</button>
      <button onclick="stopSimulateWebSocket()">停止模拟</button>
      <button onclick="showTraceDemo('curve')">显示轨迹</button>
      <button onclick="clearAllPersons()">清除人员</button>
      <button onclick="clearAllTraces()">清除轨迹</button>
    </div> -->
    <!-- <div class="toolbar-row">
      <label>背景图:</label>
      <input type="text" id="bgImageInput" placeholder="输入图片URL或Base64">
      <select id="bgScaleMode">
        <option value="fill">填充 (fill)</option>
        <option value="fit">适应 (fit)</option>
        <option value="stretch">拉伸 (stretch)</option>
        <option value="center">居中 (center)</option>
      </select>
      <button onclick="setBackgroundImage()">设置背景</button>
      <button onclick="clearBackgroundImage()">清除背景</button>
      <input type="file" id="bgFileInput" accept="image/*" onchange="handleBgFileSelect(event)" style="display:none">
      <button onclick="document.getElementById('bgFileInput').click()">选择本地图片</button>
    </div> -->
  </div>

  <div id="canvas-container"></div>
  <div class="mouse-position" id="mousePosition">X: 0, Y: 0</div>

  <!-- <div class="info">
    <p>操作提示：</p>
    <ul>
      <li>绘制区域：点击添加点，靠近起始点闭合多边形</li>
      <li>曲线工具：点击添加控制点，按 Enter 完成，按 Escape 取消</li>
      <li>文字工具：点击画布添加文本</li>
      <li>缩放：滚轮缩放，Alt+拖动 或 鼠标中键拖动平移</li>
      <li>撤销：绘制时按 Ctrl+Z 撤销上一个点</li>
    </ul>
  </div> -->

  <link rel="stylesheet" href="/dist/style.css">
  <script src="/demo/static/fabric.js"></script>
  <script src="/dist/vue-fabric.umd.js"></script>
  <script>
    const { FabricPaint, AreaTool, DragTool, SelectTool, RectTool, LineTool, TextTool, CurveTool, ImageTool, Toolbar } = VueFabric
    const container = document.getElementById('canvas-container')
    const board = new FabricPaint('#canvas-container', {
      width: container.clientWidth,
      height: container.clientHeight,
      // 按照实际像素点击内容
      // perPixelTargetFind: false,
      backgroundColor: 'transparent',
      defaultShowHelpers: false
    }).init()

    board
      .registerTool('select', new SelectTool())
      .registerTool('line', new LineTool())
      .registerTool('area', new AreaTool({
        // continueDraw: false
      }))
      .registerTool('curve', new CurveTool())
      .registerTool('rect', new RectTool())
      .registerTool('text', new TextTool({
        fill: '#0000BF'
      }))
      .registerTool('image', new ImageTool())
      .registerTool('drag', new DragTool())
      .setTool('select')

    const toolbar = new Toolbar(board, {
      tools: ['select', 'area', 'undo', 'redo', 'helpers'],
      // tools: ['lineColor', 'fillColor', 'drag', 'select', 'line', 'area', 'rect', 'curve', 'image', 'helpers', 'undo', 'redo'],
      visible: true
    }).init()

    // 监听鼠标移动事件，实时显示坐标
    const mousePositionEl = document.getElementById('mousePosition')
    board.on('mouse:move', (data) => {
      mousePositionEl.textContent = `X: ${data.x}, Y: ${data.y}`
    })

    board.on('line:created', (data) => {
      console.log('直线已创建:', data)
    })

    board.on('line:clicked', (data) => {
      console.log('直线已选中:', data)
    })

    board.on('area:created', (data) => {
      console.log('区域已创建:', data)
    })

    board.on('area:clicked', (data) => {
      console.log('区域已选中:', data)
    })

    board.on('curve:created', (data) => {
      console.log('曲线已创建:', data)
    })

    board.on('curve:clicked', (data) => {
      console.log('曲线已选择:', data)
    })

    board.on('rect:created', (data) => {
      console.log('矩形已创建:', data)
    })

    board.on('rect:clicked', (data) => {
      console.log('矩形被点击:', data)
    })

    board.on('text:created', (data) => {
      console.log('文本已创建:', data)
    })

    board.on('text:clicked', (data) => {
      console.log('文字被点击:', data)
    })

    board.on('text:updated', (data) => {
      console.log('文字被修改:', data)
    })

    board.on('image:created', (data) => {
      console.log('图片已创建:', data)
    })

    board.on('image:clicked', (data) => {
      console.log('图片被点击:', data)
    })

    board.on('image:updated', (data) => {
      console.log('图片被修改:', data)
    })

    board.on('canvas:zoomed', (e) => {
      console.log('缩放倍率：', e)
    })

    function exportCanvas() {
      const json = board.exportToJSON()
      console.log('导出数据:', JSON.parse(json))
    }

    function handleJsonFileImport(event) {
      const file = event.target.files[0]
      if (!file) return

      const reader = new FileReader()
      reader.onload = function (e) {
        try {
          const json = e.target.result
          board.clear()
          board.importFromJSON(json).then(() => {
            console.log('JSON文件导入成功')
          }).catch((error) => {
            console.error('导入失败:', error)
            alert('导入失败: ' + error.message)
          })
        } catch (error) {
          console.error('解析JSON文件失败:', error)
          alert('解析JSON文件失败')
        }
      }
      reader.readAsText(file)
      event.target.value = ''
    }

    function createSampleImage() {
      const canvas = document.createElement('canvas')
      canvas.width = 50
      canvas.height = 50
      const ctx = canvas.getContext('2d')
      ctx.fillStyle = '#02a7f0'
      ctx.fillRect(0, 0, 50, 50)
      ctx.fillStyle = '#ffffff'
      ctx.font = '12px Arial'
      ctx.textAlign = 'center'
      ctx.textBaseline = 'middle'
      ctx.fillText('IMG', 25, 25)
      return canvas.toDataURL('image/png')
    }
    const sampleImageBase64 = createSampleImage()

    let textCounter = 1
    let lastCreatedTextId = null

    // 新增文字
    function addCustomText() {
      const text = board.insertText({
        id: 11,
        x: textCounter * 16,
        y: textCounter * 16,
        text: '测试文字 ' + textCounter,
        textOrigin: 'left',
        fill: 'red'
      })
      if (text && text.customData) {
        lastCreatedTextId = text.customData.drawId
      }
      textCounter++
    }

    // 新增图片
    async function addCustomImage() {
      const img = await board.insertImage({
        id: 22,
        x: 200,
        y: 200,
        width: 20,
        // src: '/demo/static/camera.png'
        base64: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAUCAYAAABmvqYOAAACsUlEQVR4AbRUW08TQRg9M7vbmy1YrFDk8sADJl5SNFpIGiDGRBISisToL9CE+KDRmPgi/gATY0z4A8ZnnohibCRCVC7aSCCioKigRNS2JNKyrbQdZ6YrgW4bXuhmzzfzne/M2dnZmaX+wTHdPzjOdhsnB8f7KQOJowQXA0tRApYogTf4rJMUjJTEnFGSpIyw0iwL4+bxWJTGI7+x29Bjv3TqrPDEnZ79yIdVVUycs5DOohXU2d2eBco/5grHtptl0vgbi2zjCiXZVBIbq9FCJRAoEUoYm4LpIiamIEEVECrmZ66mrNZZyqCM55eIosB2oC6fNuVU02CprDbxfI/PTHf4EvR10D/Ct+P1LNhEMhZZSSx9TccXP0P/8R2JhbkdoS9/g9ALbKwn5rnxM8Jot3iifKfJYPM9gF2JjY3+jLwcVqOvniM6EkJ0+PHOGH0Kqedj4nPvXvzJZnq435dNc9FJg64SVdVFX6LIWsra1rBFR22OtblgYPPcyJkLrQJ1WbHZY6IvoWpgslM8yDrX/Vc4vNVhECJpwW2ah7tOrFsrKkOClCAEsDmKPkA68DpIzkJ1lr3X3J5pOdYIuYqR2I/6Hmmu8hkjBcSsHC4wixVMUcH41pMtz8F5WTfEjtr6UEyJfjBS2VAZjTDV1fLR7fPfpKq2alCAWFOqApoFEKaqaG053hDZqmqGypqO3f3U2ZkyKNlQGbeEmcvnh1yNjdfs3tonfL+vgZ9CsCw0jnKrBhAA67lvZnHvm9xT3zDgbe+4EQ62LvHKtttkLqrzt64+cAdO91a2n+mDoqaRyWAjk0VCTwLpNMAPmd1bE6rq6L7jDjT3TpxtmRXj8lHQXIjengssTl/sue9qOt7mPOzrcx481G9raHzoPNJ0W/PWXdrb2nbhTbBlINx1quhP6B8AAAD//7KfP7kAAAAGSURBVAMAHm58isoK8SwAAAAASUVORK5CYII='
      })
    }

    // 通过ID删除对象
    function deleteById(id) {
      const result = board.removeById(id)
      console.log('通过ID删除结果:', result, 'ID:', id)
      return result
    }

    // 列出所有自定义对象
    function listCustomObjects() {
      const objects = board.getObjects()
      console.log('所有自定义对象:', objects)
      return objects
    }

    // 通过输入框ID修改文字
    function updateTextByInput() {
      const id = document.getElementById('textIdInput').value.trim()
      if (!id) {
        alert('请输入文字ID')
        return
      }
      const newText = prompt('请输入新的文字内容:')
      if (newText !== null) {
        const result = board.updateTextById(id, {
          text: newText,
          fill: '#ff0000'
        })
        if (result) {
          console.log('通过ID修改文字成功:', id)
        } else {
          alert('未找到该ID的文字对象')
        }
      }
    }

    // 通过输入框ID旋转图片
    function rotateImageByInput() {
      const id = document.getElementById('imageIdInput').value.trim()
      if (!id) {
        alert('请输入图片ID')
        return
      }
      const obj = board.getObjectById(id)
      if (obj) {
        const currentAngle = obj.angle || 0
        const result = board.updateImageById(id, {
          angle: currentAngle + 45
        })
        console.log('通过ID旋转图片成功:', id, '当前角度:', currentAngle + 45)
      } else {
        alert('未找到该ID的图片对象')
      }
    }

    // 通过输入框ID删除对象
    function deleteByInput() {
      const id = document.getElementById('deleteIdInput').value.trim()
      if (!id) {
        alert('请输入要删除的ID')
        return
      }
      const result = board.removeById(id)
      if (result) {
        console.log('通过ID删除成功:', id)
        document.getElementById('deleteIdInput').value = ''
      } else {
        alert('未找到该ID的对象')
      }
    }

    // 背景图相关函数
    function setBackgroundImage() {
      const source = document.getElementById('bgImageInput').value.trim()
      const scaleMode = document.getElementById('bgScaleMode').value
      if (!source) {
        alert('请输入图片URL或Base64')
        return
      }
      board.setBackgroundImage({
        source: source,
        scaleMode: scaleMode,
        opacity: 1
      }).then(() => {
        console.log('背景图已设置')
      })
    }

    function clearBackgroundImage() {
      board.clearBackgroundImage()
      console.log('背景图已清除')
    }

    // 手动上传本地图片作为背景
    function handleBgFileSelect(event) {
      const file = event.target.files[0]
      if (!file) return

      const reader = new FileReader()
      reader.onload = function (e) {
        const base64 = e.target.result
        const scaleMode = document.getElementById('bgScaleMode').value
        board.setBackgroundImage({
          source: base64,
          scaleMode: scaleMode,
          opacity: 1
        }).then(() => {
          console.log('本地背景图已设置')
        })
      }
      reader.readAsDataURL(file)
      event.target.value = ''
    }

    board.on('backgroundImage:set', (data) => {
      console.log('背景图已设置:', data)
    })

    board.on('backgroundImage:cleared', () => {
      console.log('背景图已清除')
    })

    board.on('backgroundImage:error', (data) => {
      console.error('背景图加载失败:', data)
    })

    // 人员追踪示例
    let tracker = board.createPersonTracker({
      displayDuration: 5000,
      deleteOld: false
    })
    let realPersonData = []
    let wsSimulationTimer = null

    // 加载真实人员数据
    async function loadRealPersonData() {
      try {
        const response = await fetch('./static/trace.json')
        const data = await response.json()

        realPersonData = []
        const colors = ['#ff0000', '#00ff00', '#0000ff', '#ff6600', '#00ccff', '#9900ff']
        let colorIndex = 0

        Object.values(data).forEach(monitors => {
          monitors.forEach(person => {
            realPersonData.push({
              id: person.personId,
              name: person.personName,
              x: parseInt(person.x),
              y: parseInt(person.y),
              lineColor: colors[colorIndex % colors.length],
              status: person.behavior
            })
            colorIndex++
          })
        })

        await tracker.createMultiplePersons(realPersonData)
        console.log('真实人员数据已加载:', realPersonData)
      } catch (error) {
        console.error('加载人员数据失败:', error)
      }
    }

    // 模拟WebSocket实时数据更新
    function startSimulateWebSocket() {
      if (wsSimulationTimer) {
        console.log('模拟已在运行中')
        return
      }

      if (realPersonData.length === 0) {
        console.warn('请先加载真实数据')
        return
      }

      console.log('开始模拟WebSocket数据推送 (每500ms更新一次位置)')

      wsSimulationTimer = setInterval(async () => {
        // 模拟位置变化
        realPersonData.forEach(p => {
          p.x += Math.random() * 30 - 15
          p.y += Math.random() * 30 - 15
          p.x = Math.max(50, Math.min(p.x, 700))
          p.y = Math.max(50, Math.min(p.y, 500))
        })

        // 模拟新数据到来时自动终止旧渲染
        await tracker.createMultiplePersons([...realPersonData])
        console.log('WebSocket数据更新:', new Date().toLocaleTimeString())
      }, 500)
    }

    function stopSimulateWebSocket() {
      if (wsSimulationTimer) {
        clearInterval(wsSimulationTimer)
        wsSimulationTimer = null
        console.log('模拟已停止')
      }
    }

    // 显示人员轨迹示例
    function showTraceDemo(pathType) {
      if (realPersonData.length === 0) {
        console.warn('请先加载真实数据')
        return
      }

      const person = realPersonData[0]
      const traces = [
        { x: person.x, y: person.y },
        { x: person.x + 100, y: person.y - 50 },
        { x: person.x + 200, y: person.y + 30 },
        { x: person.x + 300, y: person.y - 20 },
        { x: person.x + 400, y: person.y + 50 }
      ]

      tracker.showTrace(person.id, person, traces)
      console.log('轨迹动画已启动:', person.name)
    }

    function clearAllPersons() {
      stopSimulateWebSocket()
      tracker.clearAllPersons()
      console.log('人员已清除')
    }

    function clearAllTraces() {
      tracker.clearAllTraces()
      console.log('轨迹已清除')
    }

    board.on('person:updated', (data) => {
      // console.log('人员更新:', data)
    })

    board.on('person:statusChange', (data) => {
      console.log('⚠️ 人员状态变更:', data.name, '->', data)
      // 业务层可在此处理状态变更，如弹窗告警等
    })

    board.on('trace:shown', (data) => {
      console.log('轨迹显示事件:', data)
    })

    board.on('person:clicked', (data) => {
      console.log('人员点击事件:', data)
    })

    board.on('batch:textsInserted', (data) => {
      console.log('批量文字插入完成:', data)
    })

    board.on('batch:imagesInserted', (data) => {
      console.log('批量图片插入完成:', data)
    })

    board.on('batch:removed', (data) => {
      console.log('批量删除完成:', data)
    })

    const demoImageBase64 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAUCAYAAABmvqYOAAACsUlEQVR4AbRUW08TQRg9M7vbmy1YrFDk8sADJl5SNFpIGiDGRBISisToL9CE+KDRmPgi/gATY0z4A8ZnnohibCRCVC7aSCCioKigRNS2JNKyrbQdZ6YrgW4bXuhmzzfzne/M2dnZmaX+wTHdPzjOdhsnB8f7KQOJowQXA0tRApYogTf4rJMUjJTEnFGSpIyw0iwL4+bxWJTGI7+x29Bjv3TqrPDEnZ79yIdVVUycs5DOohXU2d2eBco/5grHtptl0vgbi2zjCiXZVBIbq9FCJRAoEUoYm4LpIiamIEEVECrmZ66mrNZZyqCM55eIosB2oC6fNuVU02CprDbxfI/PTHf4EvR10D/Ct+P1LNhEMhZZSSx9TccXP0P/8R2JhbkdoS9/g9ALbKwn5rnxM8Jot3iifKfJYPM9gF2JjY3+jLwcVqOvniM6EkJ0+PHOGH0Kqedj4nPvXvzJZnq435dNc9FJg64SVdVFX6LIWsra1rBFR22OtblgYPPcyJkLrQJ1WbHZY6IvoWpgslM8yDrX/Vc4vNVhECJpwW2ah7tOrFsrKkOClCAEsDmKPkA68DpIzkJ1lr3X3J5pOdYIuYqR2I/6Hmmu8hkjBcSsHC4wixVMUcH41pMtz8F5WTfEjtr6UEyJfjBS2VAZjTDV1fLR7fPfpKq2alCAWFOqApoFEKaqaG053hDZqmqGypqO3f3U2ZkyKNlQGbeEmcvnh1yNjdfs3tonfL+vgZ9CsCw0jnKrBhAA67lvZnHvm9xT3zDgbe+4EQ62LvHKtttkLqrzt64+cAdO91a2n+mDoqaRyWAjk0VCTwLpNMAPmd1bE6rq6L7jDjT3TpxtmRXj8lHQXIjengssTl/sue9qOt7mPOzrcx481G9raHzoPNJ0W/PWXdrb2nbhTbBlINx1quhP6B8AAAD//7KfP7kAAAAGSURBVAMAHm58isoK8SwAAAAASUVORK5CYII='

    let batchTextIds = []
    let batchImageIds = []

    async function batchAddTexts() {
      const canvasWidth = container.clientWidth
      const canvasHeight = container.clientHeight
      const textOptions = []

      for (let i = 0; i < 5; i++) {
        const id = `text-batch-${Date.now()}-${i}`
        batchTextIds.push(id)
        textOptions.push({
          id: id,
          x: Math.random() * (canvasWidth - 100) + 50,
          y: Math.random() * (canvasHeight - 100) + 50,
          text: `批量文字 ${i + 1}`
        })
      }

      const result = await board.batchInsertTexts(textOptions)
      console.log('批量新增文字结果:', result)
    }

    async function batchAddImages() {
      const canvasWidth = container.clientWidth
      const canvasHeight = container.clientHeight
      const imageOptions = []

      for (let i = 0; i < 5; i++) {
        const id = `image-batch-${Date.now()}-${i}`
        batchImageIds.push(id)
        imageOptions.push({
          id: id,
          x: Math.random() * (canvasWidth - 100) + 50,
          y: Math.random() * (canvasHeight - 100) + 50,
          base64: demoImageBase64,
          width: 20,
        })
      }

      const result = await board.batchInsertImages(imageOptions)
      console.log('批量新增图片结果:', result)
    }

    async function batchUpdateTexts() {
      if (batchTextIds.length === 0) {
        console.warn('请先批量新增文字')
        return
      }

      const updateOptions = batchTextIds.map((id, i) => ({
        id: id,
        text: `已修改文字 ${i + 1}`,
        fill: '#ff0000'
      }))

      const result = await board.batchInsertTexts(updateOptions)
      console.log('批量修改文字结果:', result)
    }

    async function batchUpdateImages() {
      if (batchImageIds.length === 0) {
        console.warn('请先批量新增图片')
        return
      }

      const canvasWidth = container.clientWidth
      const canvasHeight = container.clientHeight
      const updateOptions = batchImageIds.map((id, i) => ({
        id: id,
        x: Math.random() * (canvasWidth - 100) + 50,
        y: Math.random() * (canvasHeight - 100) + 50,
        angle: 45,
      }))

      const result = await board.batchInsertImages(updateOptions)
      console.log('批量修改图片结果:', result)
    }

    async function batchDelete() {
      const allIds = [...batchTextIds, ...batchImageIds]
      if (allIds.length === 0) {
        console.warn('没有可删除的批量元素')
        return
      }

      const result = await board.batchRemoveByIds(allIds)
      console.log('批量删除结果:', result)

      batchTextIds = []
      batchImageIds = []
    }

    console.log('PaintBoard 已初始化:', board)
  </script>
</body>

</html>